CS2610 - Wednesday, September 21 - Lecture 10 - Module 1

# Topics:
* [Announcements](#announcements)
* [Continue building an HTTP server in Python](#continue-building-an-http-server-in-python)
* [Binary data and your Python HTTP server](#binary-data-and-your-python-http-server)
* [moved to M21- Try out different Response headers with our `server.py`](#moved-to-m21-try-out-different-response-headers-with-our-serverpy)
* [HTTP Redirects](#http-redirects)


------------------------------------------------------------
# Announcements

## Free Software and Linux Club

*   **What**  Tolerating the Terminal
*   **When**  6:30pm Wednesday, September 21st
*   **Where** ESLC 053, [FSLC Discord server](https://discord.gg/p4jRxrQmqP)

At this point we have taught you how to install Linux, but learning anything new comes with a few quirks. With that in mind, let's talk about the **terminal**, Linux's most infamous quirk. It's completely possible to use many distros without even touching the terminal, but knowing how to use a command line is still incredibly useful, especially to a programmer, and has applications far outside the realm of running Linux on your laptop.

Join us for this week's presentation where we'll teach you how using the terminal can actually make your life easier with package managers, shell utilities, man pages, service managers, shell scripting, and more.


## CyberSentinels Kickoff Meeting

* **When:**  Thursday, September 22 at 7:00 p.m.
* **Where:** Huntsman Hall room 320
* **What:**  Competitions, roadmap, questions, pizza!

Miss our opening social?  No problem!  Come see what CyberSentinels is all about, what our meetings typically look like, our upcoming events and plans for the rest of the semester, as well as details for security competitions that are coming up.

Come learn, have a great time, eat pizza, and be converted to the dark side!

If you haven't already, join our [Discord](https://discord.gg/YbB9zuD7f6). Please RSVP for the kickoff on the Events tab so we can get a headcount for pizza!


## Lucid Tech Talk at USU

*   **What**  taking Ownership as a New Engineer
*   **When**  6:00pm Monday, September 26th
*   **Where** Old Main 115
    *   Free Pizza!
    *   $300 in Prizes!

Starting out in industry as a new software engineer can be a taunting task. At Lucid we strive to create an environment where new engineers are able to take ownership of their roles and thrive in an autonomous fashion.

Whether it be learning new coding languages, developing in a different tech stack, or adopting a company's culture, Lucid has the tools to help you succeed. Come hear two of Lucid's engineers speak on how they grew in and adopted Lucid's values.

This is a great opportunity to hear from industry professionals and ask questions!


# Action Items


## Call on 2 designated questioners



# Continue building an HTTP server in Python

*   You can use what we wrote today in class as a starting point for your assignment.
    *   *Be aware that I'm **not** going to write the whole thing for you in lecture.  This file is just a hint!*
    *   ~~Crossed out~~ items are things that we wrote on [Monday, Sep. 19](../Lec09-Mon_Sep_19/README.md).

0.  ~~Print to the console the request headers that the browser sends our way~~
1.  ~~Make a correct HTTP response~~
    *   ~~Include the `Server` header~~
    *   ~~Include the `Date` header with a current time stamp generated by `strftime('%c')`~~
2.  ~~Return a basic, hard-coded home page at the path `/`~~
3.  For other requests, return a simple 404 page which echoes the path the user tried to reach
4.  Use the `307 Temporary Redirect` status + the `Location` header to send requests to `/exit` over to `/`, then make the server quit
5.  Use the `307 Temporary Redirect` status + the `Location` header to send requests to `/index.html` over to `/`
    *   What happens to the old content at `/`?

Here's the [server.py](./server.py)



# Binary data and your Python HTTP server

If you write your server carefully you won't have to worry about the
distinction between binary and textual data.

Don't forget these resources:

*   [Strings vs. Bytes](../Python_Review.md#strings-vs-bytes)
*   [Reading files in Python](../Python_Review.md#reading-files-in-python)

The *bytestring* is a collection that feels just like an ordinary string.  In particular you can use `len()` to find out how long it is.

The only other trick is that, in order for the browser to be able to interpret the binary data you send it, you need to tell it what kind of ones and zeroes it's getting with the `Content-Type` header.  See the **Hints** section of the Assignment for a slick way to solve this problem.


## Add an image to my "index" page

The MIME-Type of `52-Anchor.jpg` is `image/jpeg`




# -moved to M21- Try out different Response headers with our `server.py`

Let's see what happens when we add some Response headers to the output of our demo program [server.py](./server.py)

*   `Date` along with current date as given by Python's built-in `time.strftime()` function
*   `Content-Length` try this with values that are smaller and larger than the size of `index.html`
*   `Content-Type` what happens when we tell the client that `index.html` is `text/html`, `text/plain`, `application/octet-stream`, `image/jpeg`, `audio/mpeg` or even `text/plain`
*   `Cache-Control: max-age=600`
*   `Set-Cookie: Chocolate_Chip=yes`



# HTTP Redirects

*   [MDN: Redirections](https://developer.mozilla.org/en-US/docs/Web/HTTP/Redirections)
*   [MDN: Location Header](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Location)

Let's implement the `307 Temporary Redirect` redirect in our little server to send the user agent to different pages.  This response code must be used in conjunction with the `Location` header to achieve the desired effect.

*   What happens if we send the `Location` header in a `200 OK` response?
    *   ...
*   What happens if we respond to redirected request with another redirect?
    *   ...
*   Can the browser get into an infinite loop just by following redirects?
    *   ...


## Use Netcat to experience redirects for yourself

We will need redirects when we learn Django.  This will all make more sense if
you use the Netcat tool and write your own HTTP requests to talk to your own
HTTP server.

Now let's try to make our server cause a redirect-ception.


```
$ nc localhost 8000
GET /level0 HTTP/1.1

HTTP/1.1 307 Temporary Redirect
Server: Erik's Cool Server
Date: Wed Jan 29 12:46:56 2020
Location: /level1


$ nc localhost 8000
GET /level1 HTTP/1.1

HTTP/1.1 307 Temporary Redirect
Server: Erik's Cool Server
Date: Wed Jan 29 12:46:56 2020
Location: /level2

```



